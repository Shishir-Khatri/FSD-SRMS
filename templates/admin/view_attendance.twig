{% extends "layout/base.twig" %}

{% block title %}Attendance Report: {{ student.first_name }}{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h2>Attendance Report: <span class="text-primary">{{ student.first_name }} {{ student.last_name }}</span></h2>
    </div>
    <a href="dashboard.php" class="btn-action btn-secondary btn-sm">Back to Dashboard</a>
</div>

<div class="sms-grid mb-section">
    <div class="sms-col sms-col-third">
        <div class="content-card text-center">
            <div class="card-content">
                <h6 class="text-muted stats-label">Attendance Percentage</h6>
                <h2 class="stats-value {% if stats.percentage < 75 %}text-danger{% else %}text-success{% endif %}">{{ stats.percentage }}%</h2>
                <p class="text-muted">Present: {{ stats.present }} / {{ stats.total }} Days</p>
            </div>
        </div>
    </div>
</div>

<div class="content-card">
    <div class="card-header-bar bg-light-header">
        <span class="card-header-title">History</span>
    </div>
    <div class="card-content p-0">
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in records %}
                    <tr>
                        <td>{{ record.attendance_date|date("F j, Y") }}</td>
                        <td>
                             {% if record.status == 'Present' %}
                                <span class="badge badge-present">Present</span>
                            {% elseif record.status == 'Absent' %}
                                <span class="badge badge-absent">Absent</span>
                            {% elseif record.status == 'Late' %}
                                <span class="badge badge-late">Late</span>
                             {% else %}
                                <span class="badge badge-other">{{ record.status }}</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="2" class="empty-state">No records found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
