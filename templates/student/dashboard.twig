{% extends "layout/base.twig" %}

{% block title %}Student Dashboard{% endblock %}

{% block content %}
<div class="page-header">
    <h2>My Dashboard</h2>
</div>

<div class="sms-grid mb-section">
    <div class="sms-col sms-col-third">
        <div class="content-card">
            <div class="card-header-bar bg-primary-header">
                <h5 class="card-header-title">My Profile</h5>
            </div>
            <div class="card-content">
                <div class="text-center mb-md">
                    <i class="bi bi-person-circle fs-4xl text-secondary"></i>
                </div>
                <h4 class="text-center my-sm">{{ student.first_name }} {{ student.last_name }}</h4>
                <p class="text-muted text-center">{{ student.academic_year }}</p>
                <hr class="hr-divider">
                <div class="sms-grid profile-grid">
                    <div class="fw-bold">Email:</div>
                    <div>{{ session.username }}</div>
                </div>
                <div class="sms-grid profile-grid">
                    <div class="fw-bold">Contact:</div>
                    <div>{{ student.contact }}</div>
                </div>
                <div class="sms-grid profile-grid">
                    <div class="fw-bold">Address:</div>
                    <div>{{ student.address }}</div>
                </div>
                 <div class="sms-grid profile-grid">
                    <div class="fw-bold">DOB:</div>
                    <div>{{ student.dob }}</div>
                </div>
            </div>
        </div>
    </div>

    <div class="sms-col sms-col-two-thirds">
        <div class="content-card">
            <div class="card-header-bar bg-success-header">
                <h5 class="card-header-title">Recent Attendance</h5>
            </div>
            <div class="card-content p-0">
                 <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for record in attendance %}
                            <tr>
                                <td>{{ record.attendance_date|date("F j, Y") }}</td>
                                <td>
                                    {% if record.status == 'Present' %}
                                        <span class="badge badge-present">Present</span>
                                    {% elseif record.status == 'Absent' %}
                                        <span class="badge badge-absent">Absent</span>
                                    {% elseif record.status == 'Late' %}
                                        <span class="badge badge-late">Late</span>
                                     {% else %}
                                        <span class="badge badge-other">{{ record.status }}</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="2" class="empty-state">No attendance records found.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
